<div class="document-list-container">
  <!-- Confirmation Dialog -->
  <p-confirmDialog />

  <!-- Loading State -->
  @if (isLoading()) {
    <div class="loading-skeleton">
      @for (i of [1, 2, 3, 4]; track i) {
        <div class="skeleton-row">
          <p-skeleton width="50%" height="1.25rem" />
          <p-skeleton width="15%" height="1.25rem" />
          <p-skeleton width="15%" height="1.25rem" />
          <p-skeleton width="20%" height="1.25rem" />
        </div>
      }
    </div>
  }

  <!-- Empty State -->
  @else if (documents().length === 0) {
    <div class="empty-state">
      <div class="empty-icon">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 7H4C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h3>Aucun document</h3>
      <p>Commencez par uploader votre premier document RH pour alimenter l'assistant.</p>
    </div>
  }

  <!-- Document Table -->
  @else {
    <p-table
      [value]="documents()"
      [paginator]="documents().length > 10"
      [rows]="10"
      [rowsPerPageOptions]="[10, 20, 50]"
      styleClass="document-table"
      responsiveLayout="scroll">

      <ng-template pTemplate="header">
        <tr>
          <th>Nom du fichier</th>
          <th>Type</th>
          <th>Catégorie</th>
          <th>Taille</th>
          <th>Statut</th>
          <th>Date d'upload</th>
          <th class="actions-column">Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-document>
        <tr>
          <!-- Filename -->
          <td class="filename-cell">
            <div class="file-info">
              <div class="file-icon-small">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <span class="filename-text">{{ document.filename }}</span>
            </div>
          </td>

          <!-- Type -->
          <td>
            <span class="file-type-badge">{{ getFileType(document.filename) }}</span>
          </td>

          <!-- Category -->
          <td>
            @if (document.category) {
              <span class="category-badge">
                <i class="pi pi-tag"></i>
                {{ document.category }}
              </span>
            } @else {
              <span class="no-category">—</span>
            }
          </td>

          <!-- Size -->
          <td class="size-cell">{{ formatFileSize(document.size) }}</td>

          <!-- Status -->
          <td>
            <p-tag
              [value]="getStatusLabel(document.status)"
              [severity]="getStatusSeverity(document.status)"
              styleClass="status-badge">
            </p-tag>
          </td>

          <!-- Upload Date -->
          <td class="date-cell">{{ formatDate(document.uploadedAt) }}</td>

          <!-- Actions -->
          <td class="actions-column">
            <div class="actions-wrapper">
              <button
                type="button"
                pButton
                icon="pi pi-pencil"
                class="p-button-rounded p-button-text edit-button"
                (click)="editDocument.emit(document)"
                pTooltip="Renommer"
                tooltipPosition="top"
                aria-label="Renommer le document">
              </button>
              <button
                type="button"
                pButton
                icon="pi pi-refresh"
                class="p-button-rounded p-button-text replace-button"
                (click)="replaceDocument.emit(document)"
                pTooltip="Remplacer le fichier"
                tooltipPosition="top"
                aria-label="Remplacer le fichier">
              </button>
              <button
                type="button"
                pButton
                icon="pi pi-trash"
                class="p-button-rounded p-button-text p-button-danger delete-button"
                (click)="confirmDelete(document)"
                [loading]="isDeleting(document.id)"
                [disabled]="isDeleting(document.id)"
                pTooltip="Supprimer"
                tooltipPosition="top"
                aria-label="Supprimer le document">
              </button>
            </div>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7" class="empty-message">
            Aucun document trouvé
          </td>
        </tr>
      </ng-template>
    </p-table>
  }
</div>
